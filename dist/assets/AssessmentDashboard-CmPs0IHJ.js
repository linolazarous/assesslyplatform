import{r as I,g as dt,a as gt,u as ht,_ as lt,b as r,c as ct,d as W,s as O,j as e,e as j,f as mt,h as U,i as vt,I as ot,k as pt,l as ft,T as xt,P as Pt,B as et,m as q,C as Bt,L as yt,n as It,o as Rt,p as Ct}from"./index-Bxr5mO_H.js";import{u as jt}from"./notistack.esm-2ii-TFc-.js";import{C as $t}from"./Chip-DFiwUXPP.js";import{T as it}from"./TableCell-B__oVtiF.js";import{I as Lt,S as Tt}from"./Select-DZCMXPxL.js";import{M as Ot}from"./MenuItem-LevUaqkI.js";import{C as St}from"./CheckCircle-B9-CAwOQ.js";import"./useControlled-BWtu2dAB.js";const bt=o=>{const s=I.useRef({});return I.useEffect(()=>{s.current=o}),s.current};function wt(o){const{badgeContent:s,invisible:t=!1,max:p=99,showZero:i=!1}=o,B=bt({badgeContent:s,max:p});let h=t;t===!1&&s===0&&!i&&(h=!0);const{badgeContent:d,max:m=p}=h?B:o,b=d&&Number(d)>m?`${m}+`:d;return{badgeContent:d,invisible:h,max:m,displayValue:b}}function kt(o){return gt("MuiBadge",o)}const k=dt("MuiBadge",["root","badge","dot","standard","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft","invisible","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","overlapRectangular","overlapCircular","anchorOriginTopLeftCircular","anchorOriginTopLeftRectangular","anchorOriginTopRightCircular","anchorOriginTopRightRectangular","anchorOriginBottomLeftCircular","anchorOriginBottomLeftRectangular","anchorOriginBottomRightCircular","anchorOriginBottomRightRectangular"]),At=["anchorOrigin","className","classes","component","components","componentsProps","children","overlap","color","invisible","max","badgeContent","slots","slotProps","showZero","variant"],nt=10,at=4,zt=o=>{const{color:s,anchorOrigin:t,invisible:p,overlap:i,variant:B,classes:h={}}=o,d={root:["root"],badge:["badge",B,p&&"invisible",`anchorOrigin${j(t.vertical)}${j(t.horizontal)}`,`anchorOrigin${j(t.vertical)}${j(t.horizontal)}${j(i)}`,`overlap${j(i)}`,s!=="default"&&`color${j(s)}`]};return mt(d,kt,h)},Mt=O("span",{name:"MuiBadge",slot:"Root",overridesResolver:(o,s)=>s.root})({position:"relative",display:"inline-flex",verticalAlign:"middle",flexShrink:0}),_t=O("span",{name:"MuiBadge",slot:"Badge",overridesResolver:(o,s)=>{const{ownerState:t}=o;return[s.badge,s[t.variant],s[`anchorOrigin${j(t.anchorOrigin.vertical)}${j(t.anchorOrigin.horizontal)}${j(t.overlap)}`],t.color!=="default"&&s[`color${j(t.color)}`],t.invisible&&s.invisible]}})(({theme:o})=>{var s;return{display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",alignContent:"center",alignItems:"center",position:"absolute",boxSizing:"border-box",fontFamily:o.typography.fontFamily,fontWeight:o.typography.fontWeightMedium,fontSize:o.typography.pxToRem(12),minWidth:nt*2,lineHeight:1,padding:"0 6px",height:nt*2,borderRadius:nt,zIndex:1,transition:o.transitions.create("transform",{easing:o.transitions.easing.easeInOut,duration:o.transitions.duration.enteringScreen}),variants:[...Object.keys(((s=o.vars)!=null?s:o).palette).filter(t=>{var p,i;return((p=o.vars)!=null?p:o).palette[t].main&&((i=o.vars)!=null?i:o).palette[t].contrastText}).map(t=>({props:{color:t},style:{backgroundColor:(o.vars||o).palette[t].main,color:(o.vars||o).palette[t].contrastText}})),{props:{variant:"dot"},style:{borderRadius:at,height:at*2,minWidth:at*2,padding:0}},{props:({ownerState:t})=>t.anchorOrigin.vertical==="top"&&t.anchorOrigin.horizontal==="right"&&t.overlap==="rectangular",style:{top:0,right:0,transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${k.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:({ownerState:t})=>t.anchorOrigin.vertical==="bottom"&&t.anchorOrigin.horizontal==="right"&&t.overlap==="rectangular",style:{bottom:0,right:0,transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${k.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:({ownerState:t})=>t.anchorOrigin.vertical==="top"&&t.anchorOrigin.horizontal==="left"&&t.overlap==="rectangular",style:{top:0,left:0,transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${k.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:({ownerState:t})=>t.anchorOrigin.vertical==="bottom"&&t.anchorOrigin.horizontal==="left"&&t.overlap==="rectangular",style:{bottom:0,left:0,transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${k.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:({ownerState:t})=>t.anchorOrigin.vertical==="top"&&t.anchorOrigin.horizontal==="right"&&t.overlap==="circular",style:{top:"14%",right:"14%",transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${k.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:({ownerState:t})=>t.anchorOrigin.vertical==="bottom"&&t.anchorOrigin.horizontal==="right"&&t.overlap==="circular",style:{bottom:"14%",right:"14%",transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${k.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:({ownerState:t})=>t.anchorOrigin.vertical==="top"&&t.anchorOrigin.horizontal==="left"&&t.overlap==="circular",style:{top:"14%",left:"14%",transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${k.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:({ownerState:t})=>t.anchorOrigin.vertical==="bottom"&&t.anchorOrigin.horizontal==="left"&&t.overlap==="circular",style:{bottom:"14%",left:"14%",transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${k.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:{invisible:!0},style:{transition:o.transitions.create("transform",{easing:o.transitions.easing.easeInOut,duration:o.transitions.duration.leavingScreen})}}]}}),Dt=I.forwardRef(function(s,t){var p,i,B,h,d,m;const b=ht({props:s,name:"MuiBadge"}),{anchorOrigin:g={vertical:"top",horizontal:"right"},className:$,component:L,components:n={},componentsProps:a={},children:y,overlap:R="rectangular",color:u="default",invisible:C=!1,max:T=99,badgeContent:S,slots:v,slotProps:l,showZero:D=!1,variant:c="standard"}=b,V=lt(b,At),{badgeContent:N,invisible:A,max:f,displayValue:P}=wt({max:T,invisible:C,badgeContent:S,showZero:D}),z=bt({anchorOrigin:g,color:u,overlap:R,variant:c,badgeContent:S}),w=A||N==null&&c!=="dot",{color:F=u,overlap:M=R,anchorOrigin:E=g,variant:x=c}=w?z:b,K=x!=="dot"?P:void 0,G=r({},b,{badgeContent:N,invisible:w,max:f,displayValue:K,showZero:D,anchorOrigin:E,color:F,overlap:M,variant:x}),Q=zt(G),X=(p=(i=v?.root)!=null?i:n.Root)!=null?p:Mt,Y=(B=(h=v?.badge)!=null?h:n.Badge)!=null?B:_t,Z=(d=l?.root)!=null?d:a.root,H=(m=l?.badge)!=null?m:a.badge,tt=ct({elementType:X,externalSlotProps:Z,externalForwardedProps:V,additionalProps:{ref:t,as:L},ownerState:G,className:W(Z?.className,Q.root,$)}),st=ct({elementType:Y,externalSlotProps:H,ownerState:G,className:W(Q.badge,H?.className)});return e.jsxs(X,r({},tt,{children:[y,e.jsx(Y,r({},st,{children:K}))]}))}),Nt=U(e.jsx("path",{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"}),"FirstPage"),Ft=U(e.jsx("path",{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"}),"LastPage"),Et=U(e.jsx("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"}),"KeyboardArrowLeft"),Ht=U(e.jsx("path",{d:"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"}),"KeyboardArrowRight"),Wt=["backIconButtonProps","count","disabled","getItemAriaLabel","nextIconButtonProps","onPageChange","page","rowsPerPage","showFirstButton","showLastButton","slots","slotProps"],Ut=I.forwardRef(function(s,t){var p,i,B,h,d,m,b,g;const{backIconButtonProps:$,count:L,disabled:n=!1,getItemAriaLabel:a,nextIconButtonProps:y,onPageChange:R,page:u,rowsPerPage:C,showFirstButton:T,showLastButton:S,slots:v={},slotProps:l={}}=s,D=lt(s,Wt),c=vt(),V=_=>{R(_,0)},N=_=>{R(_,u-1)},A=_=>{R(_,u+1)},f=_=>{R(_,Math.max(0,Math.ceil(L/C)-1))},P=(p=v.firstButton)!=null?p:ot,z=(i=v.lastButton)!=null?i:ot,w=(B=v.nextButton)!=null?B:ot,F=(h=v.previousButton)!=null?h:ot,M=(d=v.firstButtonIcon)!=null?d:Nt,E=(m=v.lastButtonIcon)!=null?m:Ft,x=(b=v.nextButtonIcon)!=null?b:Ht,K=(g=v.previousButtonIcon)!=null?g:Et,G=c?z:P,Q=c?w:F,X=c?F:w,Y=c?P:z,Z=c?l.lastButton:l.firstButton,H=c?l.nextButton:l.previousButton,tt=c?l.previousButton:l.nextButton,st=c?l.firstButton:l.lastButton;return e.jsxs("div",r({ref:t},D,{children:[T&&e.jsx(G,r({onClick:V,disabled:n||u===0,"aria-label":a("first",u),title:a("first",u)},Z,{children:c?e.jsx(E,r({},l.lastButtonIcon)):e.jsx(M,r({},l.firstButtonIcon))})),e.jsx(Q,r({onClick:N,disabled:n||u===0,color:"inherit","aria-label":a("previous",u),title:a("previous",u)},H??$,{children:c?e.jsx(x,r({},l.nextButtonIcon)):e.jsx(K,r({},l.previousButtonIcon))})),e.jsx(X,r({onClick:A,disabled:n||(L!==-1?u>=Math.ceil(L/C)-1:!1),color:"inherit","aria-label":a("next",u),title:a("next",u)},tt??y,{children:c?e.jsx(K,r({},l.previousButtonIcon)):e.jsx(x,r({},l.nextButtonIcon))})),S&&e.jsx(Y,r({onClick:f,disabled:n||u>=Math.ceil(L/C)-1,"aria-label":a("last",u),title:a("last",u)},st,{children:c?e.jsx(M,r({},l.firstButtonIcon)):e.jsx(E,r({},l.lastButtonIcon))}))]}))});function Vt(o){return gt("MuiTablePagination",o)}const J=dt("MuiTablePagination",["root","toolbar","spacer","selectLabel","selectRoot","select","selectIcon","input","menuItem","displayedRows","actions"]);var ut;const Kt=["ActionsComponent","backIconButtonProps","className","colSpan","component","count","disabled","getItemAriaLabel","labelDisplayedRows","labelRowsPerPage","nextIconButtonProps","onPageChange","onRowsPerPageChange","page","rowsPerPage","rowsPerPageOptions","SelectProps","showFirstButton","showLastButton","slotProps","slots"],Gt=O(it,{name:"MuiTablePagination",slot:"Root",overridesResolver:(o,s)=>s.root})(({theme:o})=>({overflow:"auto",color:(o.vars||o).palette.text.primary,fontSize:o.typography.pxToRem(14),"&:last-child":{padding:0}})),Zt=O(xt,{name:"MuiTablePagination",slot:"Toolbar",overridesResolver:(o,s)=>r({[`& .${J.actions}`]:s.actions},s.toolbar)})(({theme:o})=>({minHeight:52,paddingRight:2,[`${o.breakpoints.up("xs")} and (orientation: landscape)`]:{minHeight:52},[o.breakpoints.up("sm")]:{minHeight:52,paddingRight:2},[`& .${J.actions}`]:{flexShrink:0,marginLeft:20}})),qt=O("div",{name:"MuiTablePagination",slot:"Spacer",overridesResolver:(o,s)=>s.spacer})({flex:"1 1 100%"}),Jt=O("p",{name:"MuiTablePagination",slot:"SelectLabel",overridesResolver:(o,s)=>s.selectLabel})(({theme:o})=>r({},o.typography.body2,{flexShrink:0})),Qt=O(Tt,{name:"MuiTablePagination",slot:"Select",overridesResolver:(o,s)=>r({[`& .${J.selectIcon}`]:s.selectIcon,[`& .${J.select}`]:s.select},s.input,s.selectRoot)})({color:"inherit",fontSize:"inherit",flexShrink:0,marginRight:32,marginLeft:8,[`& .${J.select}`]:{paddingLeft:8,paddingRight:24,textAlign:"right",textAlignLast:"right"}}),Xt=O(Ot,{name:"MuiTablePagination",slot:"MenuItem",overridesResolver:(o,s)=>s.menuItem})({}),Yt=O("p",{name:"MuiTablePagination",slot:"DisplayedRows",overridesResolver:(o,s)=>s.displayedRows})(({theme:o})=>r({},o.typography.body2,{flexShrink:0}));function to({from:o,to:s,count:t}){return`${o}–${s} of ${t!==-1?t:`more than ${s}`}`}function oo(o){return`Go to ${o} page`}const eo=o=>{const{classes:s}=o;return mt({root:["root"],toolbar:["toolbar"],spacer:["spacer"],selectLabel:["selectLabel"],select:["select"],input:["input"],selectIcon:["selectIcon"],menuItem:["menuItem"],displayedRows:["displayedRows"],actions:["actions"]},Vt,s)},so=I.forwardRef(function(s,t){var p;const i=ht({props:s,name:"MuiTablePagination"}),{ActionsComponent:B=Ut,backIconButtonProps:h,className:d,colSpan:m,component:b=it,count:g,disabled:$=!1,getItemAriaLabel:L=oo,labelDisplayedRows:n=to,labelRowsPerPage:a="Rows per page:",nextIconButtonProps:y,onPageChange:R,onRowsPerPageChange:u,page:C,rowsPerPage:T,rowsPerPageOptions:S=[10,25,50,100],SelectProps:v={},showFirstButton:l=!1,showLastButton:D=!1,slotProps:c={},slots:V={}}=i,N=lt(i,Kt),A=i,f=eo(A),P=(p=c?.select)!=null?p:v,z=P.native?"option":Xt;let w;(b===it||b==="td")&&(w=m||1e3);const F=pt(P.id),M=pt(P.labelId),E=()=>g===-1?(C+1)*T:T===-1?g:Math.min(g,(C+1)*T);return e.jsx(Gt,r({colSpan:w,ref:t,as:b,ownerState:A,className:W(f.root,d)},N,{children:e.jsxs(Zt,{className:f.toolbar,children:[e.jsx(qt,{className:f.spacer}),S.length>1&&e.jsx(Jt,{className:f.selectLabel,id:M,children:a}),S.length>1&&e.jsx(Qt,r({variant:"standard"},!P.variant&&{input:ut||(ut=e.jsx(Lt,{}))},{value:T,onChange:u,id:F,labelId:M},P,{classes:r({},P.classes,{root:W(f.input,f.selectRoot,(P.classes||{}).root),select:W(f.select,(P.classes||{}).select),icon:W(f.selectIcon,(P.classes||{}).icon)}),disabled:$,children:S.map(x=>I.createElement(z,r({},!ft(z)&&{ownerState:A},{className:f.menuItem,key:x.label?x.label:x,value:x.value?x.value:x}),x.label?x.label:x))})),e.jsx(Yt,{className:f.displayedRows,children:n({from:g===0?0:C*T+1,to:E(),count:g===-1?-1:g,page:C})}),e.jsx(B,{className:f.actions,backIconButtonProps:h,count:g,nextIconButtonProps:y,onPageChange:R,page:C,rowsPerPage:T,showFirstButton:l,showLastButton:D,slotProps:c.actions,slots:V.actions,getItemAriaLabel:L,disabled:$})]})}))}),no=U(e.jsx("path",{d:"m18 7-1.41-1.41-6.34 6.34 1.41 1.41zm4.24-1.41L11.66 16.17 7.48 12l-1.41 1.41L11.66 19l12-12zM.41 13.41 6 19l1.41-1.41L1.83 12z"}),"DoneAll"),ao=U(e.jsx("path",{d:"M6 2v6h.01L6 8.01 10 12l-4 4 .01.01H6V22h12v-5.99h-.01L18 16l-4-4 4-3.99-.01-.01H18V2zm10 14.5V20H8v-3.5l4-4zm-4-5-4-4V4h8v3.5z"}),"HourglassEmpty"),rt={active:{color:"success",icon:e.jsx(St,{})},in_progress:{color:"warning",icon:e.jsx(ao,{})},completed:{color:"primary",icon:e.jsx(no,{})}};function ro(){const[o,s]=I.useState([]),[t,p]=I.useState(!0),[i,B]=I.useState("active"),[h,d]=I.useState(0),[m,b]=I.useState(5),{enqueueSnackbar:g}=jt(),$=I.useCallback(async()=>{p(!0);try{const n=localStorage.getItem("token");if(!n)throw new Error("Authentication token not found");const a=await fetch(`/api/assessments?status=${i}`,{method:"GET",headers:{Authorization:`Bearer ${n}`}}),y=await a.json();if(!a.ok)throw new Error(y.message||"Failed to fetch assessments");s(Array.isArray(y.assessments)?y.assessments:y)}catch(n){console.error("Error fetching assessments:",n),g(`Failed to load assessments: ${n.message}`,{variant:"error"})}finally{p(!1)}},[i,g]);I.useEffect(()=>{$()},[$]);const L=async n=>{try{const a=localStorage.getItem("token");if(!a)throw new Error("Authentication token not found");const y=await fetch(`/api/assessments/${n}/start`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`}});if(!y.ok){const R=await y.json();throw new Error(R.message||"Failed to start assessment")}g("Assessment started successfully",{variant:"success"}),$()}catch(a){console.error("Error starting assessment:",a),g(`Failed to start assessment: ${a.message}`,{variant:"error",autoHideDuration:5e3})}};return e.jsxs(Pt,{elevation:2,sx:{p:3,borderRadius:2},children:[e.jsxs(et,{sx:{display:"flex",justifyContent:"space-between",mb:3},children:[e.jsx(q,{variant:"h6",fontWeight:"bold",children:"Assessment Dashboard"}),e.jsx(et,{sx:{display:"flex",gap:1},children:Object.keys(rt).map(n=>e.jsx($t,{label:n.replace("_"," "),onClick:()=>{B(n),d(0)},color:i===n?"primary":"default",variant:i===n?"filled":"outlined",sx:{textTransform:"capitalize"}},n))})]}),t?e.jsx(et,{sx:{display:"flex",justifyContent:"center",p:4},children:e.jsx(Bt,{})}):o.length===0?e.jsxs(q,{variant:"body1",color:"text.secondary",sx:{p:3,textAlign:"center"},children:["No ",i.replace("_"," ")," assessments found."]}):e.jsxs(e.Fragment,{children:[e.jsx(yt,{sx:{mb:2},children:o.slice(h*m,h*m+m).map(n=>{const a=rt[n.status]||rt.active;return e.jsx(It,{divider:!0,secondaryAction:e.jsx(Ct,{variant:"contained",size:"small",startIcon:a.icon,onClick:()=>L(n.id),disabled:n.status==="completed",sx:{textTransform:"capitalize"},children:n.status==="active"?"Start":n.status==="in_progress"?"Continue":"Completed"}),children:e.jsx(Rt,{primary:e.jsx(et,{sx:{display:"flex",alignItems:"center",gap:1},children:e.jsx(Dt,{color:a.color,variant:"dot",overlap:"circular",children:e.jsx(q,{fontWeight:"medium",children:n.title})})}),secondary:e.jsxs(e.Fragment,{children:[e.jsxs(q,{variant:"body2",component:"span",display:"block",children:["Created:"," ",new Date(n.createdAt).toLocaleDateString()]}),n.dueDate&&e.jsxs(q,{variant:"body2",component:"span",display:"block",children:["Due:"," ",new Date(n.dueDate).toLocaleString()]})]})})},n.id)})}),e.jsx(so,{rowsPerPageOptions:[5,10,25],component:"div",count:o.length,rowsPerPage:m,page:h,onPageChange:(n,a)=>d(a),onRowsPerPageChange:n=>{b(parseInt(n.target.value,10)),d(0)}})]})]})}ro.propTypes={};export{ro as default};
